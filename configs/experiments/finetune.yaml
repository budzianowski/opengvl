defaults:
  - dataset: nyudoor
  - data_loader: huggingface
  - model: qwen
  - mapper: gemini
  - prompts: default
  - prompt_phrases: default
  - mapping_prompts: default
  - _self_

seed: 42
shuffle: true       # Whether to shuffle frame presentation order


finetune:
  num_train_trajectories: 2
  num_val_trajectories: 1
  max_seq_len: 2048
  batch_size: 2
  num_epochs: 3
  lr: 2e-5
  weight_decay: 0.01
  warmup_ratio: 0.03
  gradient_accumulation_steps: 8
  logging_steps: 10
  eval_steps: 50
  save_steps: 200
  early_stopping_patience: 3
  gradient_checkpointing: true
  bf16: true
  lr_scheduler_type: cosine
  max_grad_norm: 1.0
  save_total_limit: 2
  wandb_project: opengvl
  wandb_run_name: finetune-${now:%H-%M-%S}
  output_dir: ${hydra:run.dir}/finetune

hydra:
  mode: MULTIRUN # comment this if you don't want to sweep
  searchpath:
    - file://configs
  run:
    dir: results/
  sweep:
    dir: multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}-finetune
    subdir: ${hydra.job.num}
  sweeper:
    params:
      dataset.num_context_episodes: 0
